<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ey Buddy Booking</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap');

  :root {
    --lime-green: #A4DE02;
    --deep-blue: #204E8B;
    --dark-bg: #111214;
    --light-bg: #f7f9fa;
    --orange: #FFA500;
    --yellow: #FFD700;
  }

  * { box-sizing: border-box; }

  body, html {
    margin: 0; padding: 0;
    height: 100vh;
    font-family: 'Orbitron', monospace, Arial, sans-serif;
    background: var(--light-bg);
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  /* HEADER with Ey Buddy Logo */
  header {
    width: 100%;
    max-width: 480px;
    height: 60px;
    background: var(--deep-blue);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--lime-green);
    font-size: 1.8rem;
    font-weight: 900;
    letter-spacing: 3px;
    user-select: none;
    box-shadow: 0 3px 10px rgba(0,0,0,0.3);
    margin-bottom: 6px;
  }

  /* Improved Dashboard lights bar */
  #dashboard {
    height: 15vh; /* slightly taller for better visibility */
    width: 100%;
    max-width: 480px;
    background: var(--dark-bg);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 3px 12px rgba(0,0,0,0.3);
    filter: drop-shadow(0 0 6px var(--lime-green));
    padding: 0 20px;
    gap: 25px;
    box-sizing: border-box;
  }

  #lights {
    display: flex;
    justify-content: space-between;
    width: 90%;
    gap: 25px;
  }

  .light {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    background: #222;
    animation: pulseGlow 3s infinite;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow:
      0 0 12px 3px rgba(164, 222, 2, 0.6), /* lime green glow */
      inset 0 0 10px #000;
    transition: box-shadow 0.3s ease-in-out;
    position: relative;
  }
  .light:hover, .light:focus {
    box-shadow:
      0 0 20px 6px var(--lime-green),
      inset 0 0 12px #000;
    cursor: pointer;
    outline: none;
  }

  /* Tooltip styling */
  .light[data-tooltip]:hover::after,
  .light[data-tooltip]:focus::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 110%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--lime-green);
    color: #000;
    padding: 5px 8px;
    border-radius: 6px;
    font-size: 0.75rem;
    white-space: nowrap;
    pointer-events: none;
    opacity: 1;
    transition: opacity 0.3s;
    z-index: 10;
  }
  .light[data-tooltip]::after {
    opacity: 0;
  }

  .light svg {
    width: 28px;
    height: 28px;
    filter: drop-shadow(0 0 1px rgba(0,0,0,0.8));
  }

  .oil svg path { fill: var(--orange); }
  .engine svg path { fill: var(--yellow); }
  .fuel svg path { fill: var(--orange); }
  .abs svg path { fill: var(--yellow); }

  @keyframes pulseGlow {
    0%, 100% {
      box-shadow:
        0 0 12px 3px rgba(164, 222, 2, 0.6),
        inset 0 0 10px #000;
    }
    50% {
      box-shadow:
        0 0 20px 6px var(--lime-green),
        inset 0 0 14px #000;
    }
  }

  /* Container below dashboard fills rest of screen */
  #mainContent {
    flex-grow: 1;
    width: 100%;
    max-width: 480px;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    padding: 10px;
  }

  /* START button wrapper & animation */
  #startButtonWrapper {
    position: relative;
    width: 140px; height: 140px;
    cursor: pointer;
    user-select: none;
    box-shadow: 0 3px 10px rgba(0,0,0,0.3);
    max-width: 90vw;
    max-height: 90vw;
    outline-offset: 4px;
  }
  #startButtonWrapper:focus {
    outline: 3px solid var(--lime-green);
  }
  #startButtonWrapper.starting::before {
    animation: turnKey 1.5s forwards;
  }
  #startButtonWrapper::before {
    content:"";
    position:absolute;
    top:-14px; left:-14px;
    width:168px; height:168px;
    border-radius:50%;
    border:4px solid var(--lime-green);
    animation:pulse 2s infinite;
    box-sizing: border-box;
    z-index: 0;
    max-width: 108vw;
    max-height: 108vw;
  }
  #startButton {
    width:100%; height:100%;
    border-radius:50%;
    display:flex; justify-content:center; align-items:center;
    background: radial-gradient(circle, var(--deep-blue) 50%, var(--lime-green) 95%);
    color:#fff;
    font-weight:bold;
    font-size: 1.5rem;
    letter-spacing:3px;
    position: relative;
    z-index: 1;
    user-select: none;
    transition: background-color 0.3s;
  }
  #startButtonWrapper.starting #startButton {
    background: var(--lime-green);
    color: var(--dark-bg);
  }

  @keyframes pulse {
    0%,100%{box-shadow:0 0 15px var(--lime-green);}
    50%{box-shadow:0 0 35px var(--lime-green);}
  }

  @keyframes turnKey {
    0% { transform: rotate(0deg); }
    50% { transform: rotate(20deg); }
    100% { transform: rotate(0deg); }
  }

  /* Modal */
  #modalOverlay {
    display:none;
    position:fixed; inset:0;
    background:rgba(0,0,0,0.6);
    display:flex; justify-content:center; align-items:center;
    z-index:100;
  }
  #modal {
    background:#fff; color:#333;
    padding:20px 25px;
    border-radius:10px;
    max-width:400px;
    max-height: 70vh;
    overflow-y: auto;
    text-align:left;
    font-family:sans-serif;
  }
  #modal h2 {margin-top:0; color:var(--deep-blue);}
  #modalButtons {margin-top:20px; text-align:right;}
  #modalButtons button {
    margin-left:10px;
    padding:8px 16px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-weight:bold;
    transition: background-color 0.3s;
  }
  #agreeBtn {background:var(--lime-green); color:#000;}
  #agreeBtn:hover {background:#8fc802;}
  #declineBtn {background:#ddd;}
  #declineBtn:hover {background:#bbb;}
  #modal a {
    color: var(--deep-blue);
    text-decoration: underline;
  }

  /* Booking Form */
  #bookingContainer {
    display:none;
    width: 100%;
    max-width:480px;
    margin: 0 auto 40px;
    background:#fff;
    padding:25px;
    border-radius:12px;
    box-shadow:0 6px 20px rgba(0,0,0,0.1);
    font-family:sans-serif;
  }
  #bookingContainer h1 {
    margin:0; text-align:center;
    color:var(--deep-blue);
  }
  #bookingContainer h2 {
    text-align:center; color:var(--lime-green);
    margin:10px 0 25px;
  }
  form label {display:block; margin-top:15px; font-weight:600;}
  input, select, textarea {
    width:100%; padding:10px;
    border:1px solid #ccc;
    border-radius:8px;
    margin-top:5px;
    font-size: 1rem;
    font-family: inherit;
  }
  form button[type="submit"] {
    margin-top:20px; width:100%;
    padding:12px;
    background:var(--lime-green);
    border:none; border-radius:8px;
    font-weight:bold; font-size:1.1rem;
    cursor:pointer;
    transition: background-color 0.3s;
  }
  form button[type="submit"]:hover {
    background: #8fc802;
  }

  /* Improved Date & Time input fallback for browsers */
  input[type="date"], input[type="time"] {
    font-family: 'Orbitron', monospace, Arial, sans-serif;
  }

  /* Autocomplete styles for service */
  #service {
    appearance: none;
    -webkit-appearance: none;
    background: white url('data:image/svg+xml;utf8,<svg fill="%23000000" height="20" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>') no-repeat right 10px center;
    background-size: 16px;
  }

  /* Responsive font scaling for the START button */
  @media (max-width: 350px) {
    #dashboard {
      height: 13vh;
      padding: 0 12px;
      gap: 15px;
    }
    #lights {
      width: 95%;
      gap: 15px;
    }
    .light {
      width: 38px;
      height: 38px;
    }
    .light svg {
      width: 22px;
      height: 22px;
    }
    #startButton {
      font-size: 1.2rem;
      letter-spacing: 2px;
    }
    #startButtonWrapper {
      width: 110px;
      height: 110px;
    }
    #startButtonWrapper::before {
      width: 132px;
      height: 132px;
      top: -11px;
      left: -11px;
    }
  }

</style>
</head>
<body>

<header>EY BUDDY</header>

<div id="dashboard" role="region" aria-label="Car dashboard with warning lights">
  <div id="lights" aria-label="Car dashboard warning lights" role="img">
    <div class="light oil" data-tooltip="Oil Pressure Warning" title="Oil Light" tabindex="0">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 18h12v-2H6v2zm6-16c-2.21 0-4 1.79-4 4v7c0 1.1.9 2 2 2s2-.9 2-2V6c0-2.21-1.79-4-4-4z"/></svg>
    </div>
    <div class="light engine" data-tooltip="Engine Management Warning" title="Engine Management Light" tabindex="0">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M16 6V4H8v2H2v14h20V6h-6zM4 18v-8h16v8H4z"/></svg>
    </div>
    <div class="light fuel" data-tooltip="Fuel Level Low" title="Fuel Light" tabindex="0">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 19h8v-6H6v6zm12-11h-3v6h1v5h2v-5h1V8z"/></svg>
    </div>
    <div class="light abs" data-tooltip="ABS Warning" title="ABS Light" tabindex="0">
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M19 13h-2v2h-2v-2h-2v2H9v-2H7v-2h2v-2h2v2h2v-2h2v2h2v2z"/></svg>
    </div>
  </div>
</div>

<div id="mainContent">
  <div id="startButtonWrapper" role="button" aria-label="Start booking" tabindex="0" aria-pressed="false">
    <div id="startButton">START</div>
  </div>
</div>

<!-- Modal -->
<div id="modalOverlay" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc">
  <div id="modal" tabindex="0">
    <h2 id="modalTitle">Terms & Conditions</h2>
    <p id="modalDesc" style="white-space: pre-line;">
      1. Service appointments are subject to availability.
      2. Cancellation requires 24h notice.
      3. Ey Buddy is not liable for pre-existing vehicle issues.
    </p>
    <p><a href="#" target="_blank" rel="noopener noreferrer">Read full terms & conditions</a></p>
    <div id="modalButtons">
      <button id="declineBtn">Decline</button>
      <button id="agreeBtn">Agree</button>
    </div>
  </div>
</div>

<!-- Booking Form -->
<div id="bookingContainer" role="main" aria-label="Mobile mechanic booking form">
  <h1>Ey Buddy</h1>
  <h2>Mobile Mechanic Booking</h2>
  <form id="bookingForm" novalidate>
    <label for="name">Full Name *</label>
    <input type="text" id="name" name="name" required autocomplete="name" />

    <label for="phone">Phone Number *</label>
    <input type="tel" id="phone" name="phone" required autocomplete="tel" pattern="[0-9\s\-\+\(\)]+" title="Please enter a valid phone number" />

    <label for="vehicle">Vehicle *</label>
    <input type="text" id="vehicle" name="vehicle" required placeholder="e.g. BMW 3 Series 2016" />

    <label for="service">Service *</label>
    <select id="service" name="service" required>
      <option value="" disabled selected>Select service</option>
      <option>Oil Change</option>
      <option>Brake Repair</option>
      <option>Engine Diagnosis</option>
      <option>Battery Replacement</option>
      <option>Other</option>
    </select>

    <label for="date">Preferred Date *</label>
    <input type="date" id="date" name="date" required />

    <label for="time">Preferred Time *</label>
    <input type="time" id="time" name="time" required />

    <label for="notes">Additional Notes</label>
    <textarea id="notes" name="notes" rows="3" placeholder="Optional"></textarea>

    <button type="submit">Book Now</button>
  </form>
</div>

<script>
  const startBtnWrapper = document.getElementById('startButtonWrapper');
  const modal = document.getElementById('modalOverlay');
  const agreeBtn = document.getElementById('agreeBtn');
  const declineBtn = document.getElementById('declineBtn');
  const dashboard = document.getElementById('dashboard');
  const mainContent = document.getElementById('mainContent');
  const bookingContainer = document.getElementById('bookingContainer');
  const bookingForm = document.getElementById('bookingForm');
  const dateInput = document.getElementById('date');

  // Set min date to today
  dateInput.min = new Date().toISOString().split('T')[0];

  // START button animation and show modal
  function startSequence() {
    if(startBtnWrapper.classList.contains('starting')) return; // prevent double-click
    startBtnWrapper.classList.add('starting');
    startBtnWrapper.setAttribute('aria-pressed', 'true');
    // After turn key animation (1.5s), show modal
    setTimeout(() => {
      modal.style.display = "flex";
      startBtnWrapper.classList.remove('starting');
    }, 1500);
  }

  startBtnWrapper.addEventListener('click', startSequence);
  // Keyboard support for START button
  startBtnWrapper.addEventListener('keydown', (e) => {
    if(e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      startSequence();
    }
  });

  declineBtn.onclick = () => {
    modal.style.display = "none";
    startBtnWrapper.setAttribute('aria-pressed', 'false');
  };

  agreeBtn.onclick = () => {
    modal.style.display = "none";
    // Hide start & dashboard, show form
    mainContent.style.display = "none";
    dashboard.style.display = "none";
    bookingContainer.style.display = "block";
    bookingForm.querySelector('#name').focus();
  };

  bookingForm.onsubmit = (e) => {
    e.preventDefault();
    if(!bookingForm.checkValidity()) {
      bookingForm.reportValidity();
      return;
    }
    alert("Thank you, your booking request has been submitted!");
    bookingForm.reset();
    // Return to start screen
    bookingContainer.style.display = "none";
    dashboard.style.display = "flex";
    mainContent.style.display = "flex";
    startBtnWrapper.setAttribute('aria-pressed', 'false');
  };
</script>

</body>
</html>